const form=document.getElementById('regForm'),nameInput=document.getElementById('name'),emailInput=document.getElementById('email'),passInput=document.getElementById('password'),confirmInput=document.getElementById('confirmPass'),ageInput=document.getElementById('age'),roleSelect=document.getElementById('role'),skillsField=document.getElementById('skillsField'),skillsInput=document.getElementById('skills');const errors={name:'NameError',email:'emailError',pass:'passError',confirm:'confirmError',age:'ageError',role:'roleError'};function clearAllErrors(){Object.values(errors).forEach(id=>{document.getElementById(id).textContent='';});[nameInput,emailInput,passInput,confirmInput,ageInput].forEach(el=>el.classList.remove('valid','invalid'));}function validateEmail(email){return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);}function getPassReq(role){return role==='admin'?12:8;}roleSelect.addEventListener('change',()=>{skillsField.style.display=roleSelect.value==='teacher'?'block':'none';clearAllErrors();});[nameInput,emailInput,passInput,confirmInput,ageInput,roleSelect].forEach(el=>el.addEventListener('input','change',clearAllErrors));form.addEventListener('submit',e=>{e.preventDefault();clearAllErrors();let valid=true;if(!nameInput.value.trim()){document.getElementById(errors.name).textContent='Name required';nameInput.classList.add('invalid');valid=false;}if(!validateEmail(emailInput.value)){document.getElementById(errors.email).textContent='Invalid email';emailInput.classList.add('invalid');valid=false;}const passReq=getPassReq(roleSelect.value);if(passInput.value.length<passReq){document.getElementById(errors.pass).textContent=`Password ${passReq}+ chars`;passInput.classList.add('invalid');valid=false;}if(passInput.value!==confirmInput.value){document.getElementById(errors.confirm).textContent='Passwords mismatch';confirmInput.classList.add('invalid');valid=false;}if(ageInput.value<18){document.getElementById(errors.age).textContent='Age 18+';ageInput.classList.add('invalid');valid=false;}if(!roleSelect.value){document.getElementById(errors.role).textContent='Select role';roleSelect.classList.add('invalid');valid=false;}if(roleSelect.value==='teacher'&&!skillsInput.value.trim()){document.getElementById('skills').classList.add('invalid');valid=false;}if(valid){alert('Registration successful!');}});
