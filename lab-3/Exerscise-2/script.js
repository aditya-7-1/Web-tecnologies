let products=[{name:'Laptop',price:1000,category:'electronics',qty:0},{name:'Book',price:20,category:'books',qty:0},{name:'Shirt',price:30,category:'clothing',qty:0}];const itemsDiv=document.getElementById('items'),totalDiv=document.getElementById('total'),couponInput=document.getElementById('coupon');function renderItems(){itemsDiv.innerHTML='';products.forEach((p,i)=>{const div=document.createElement('div');div.innerHTML=`${p.name} (${p.category}): $${p.price} x <input type="number" min="0" value="${p.qty}" onchange="updateQty(${i},this.value)">`;itemsDiv.appendChild(div);});updateTotal();}function updateQty(index,qty){products[index].qty=parseInt(qty)||0;renderItems();}function getDiscount(){let total=getSubtotal(),discount=0;if(total>500)discount+=0.1;products.forEach(p=>{if(p.category==='books'&&p.qty>=3)discount+=0.05;if(p.qty>=5)discount+=0.1;});const hour=new Date().getHours();if(hour>=9&&hour<17)discount+=0.05;return Math.min(discount,0.3);}function getSubtotal(){return products.reduce((sum,p)=>sum+p.price*p.qty,0);}function updateTotal(){const subtotal=getSubtotal(),disc=getDiscount()*subtotal,total=subtotal-disc;totalDiv.textContent=`Total: $${total.toFixed(2)} (Discount: ${(disc/subtotal*100).toFixed(1)}%)`;}function applyCoupon(){const code=couponInput.value.toUpperCase();if(code==='SAVE10'){let tempTotal=getSubtotal();tempTotal*=0.9;totalDiv.textContent=`Total: $${tempTotal.toFixed(2)} (Coupon applied)`;}else{alert('Invalid coupon');}}function resetCart(){products.forEach(p=>p.qty=0);couponInput.value='';renderItems();}renderItems();
